<!DOCTYPE html>
<html>
	<head>
		<title>Maji Bingo - twitch.tv/majijej</title>
		<link rel="stylesheet" href="style.css">
		<link rel="shortcut icon" id="fav" type="image/png" href="favicon.png"/>
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet">
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
		<script type="text/javascript" src="./entries.js"></script>
		<script type="text/javascript" src="./tipsnotif.js"></script>
		
		<meta charset="utf-8"/>
	</head>
	
	<body>
		<div id="banner"><img src="logo.png" /></div>
		<div id="bingo">
			<div id="buttons">
				<div class="button" onclick="generateSeed()" onmouseenter="showTooltip('Generate New Board')" onmouseleave="noTooltip()">New Board</div>
				<div class="button" onclick="shareSeed()" onmouseenter="showTooltip('Copy Seed to Clipboard')" onmouseleave="noTooltip()" >Share Board</div>
			</div><br>
			
			<table id="slots"></table>
		</div>
		<div id="footer"></div>
		<div id="notif"></div>
		
		<div class="tooltip"></div>
		
		<script>
			let arguments=new URLSearchParams(window.location.search);
			seed=arguments.get("s");
			
			const ham=[
			"Spaghetti code adapted by TB", "A few days of TB's time", "Carefully thrown together by TB", "A little bit of a mess, but that isn't TB's fault", "TB was bored",
			"Crude adaptation quickly put together by TB"
			];
			
			if (!seed) {
				generateSeed();
			}
			
			rnd=new Math.seedrandom(seed);
			
			generateBoard();
			
			window.addEventListener("resize", resize);
			resize();
			
			/////////////////////////////////////////////////////////////
			
			function resize() { //god bless stackoverflow -> Amen
				let scale=(window.innerHeight-170)/900;
				let b=document.getElementById("bingo");
				b.style.transform="scale("+scale+")";
			}
			
			function generateSeed() {
				seed=(Math.floor(Math.random()*10000000000)).toString(36);
				location="?s="+seed; //mmmh yes gimme dat garbage javascript KEKW
			}
			
			function shareSeed() {
				navigator.clipboard.writeText(location.href);
				showNotif("Copied to clipboard! You can paste<br>the link wherever you want to share it.");
			}
			
			function slotCheck(e) {
				e.classList.toggle("checked");
			}
			
			function generateBoard() {
				let chosen=[];
				
				while (chosen.length<25) {
					let pick=bingos[Math.floor(rnd()*bingos.length)];
					if (!chosen.includes(pick)) {
						chosen.push(pick);
					}
				}
				
				let table=document.getElementById("slots");
				let tr=null;
				
				for (let i=0; i<25; i++) {
					if ((i % 5)==0 || !tr) {
						tr=table.insertRow(-1);
					}
					
					let c=tr.insertCell();
					c.innerHTML=chosen[i];
					c.classList.add("slot");
					c.onclick=function () {slotCheck(c);};
				}
				
				generateFooter();
			}
			
			function generateFooter() {
				let f=document.getElementById("footer");
				f.innerHTML=ham[Math.floor(rnd()*ham.length)].replace("TB", "<a href=\"https://github.com/tomasitobambito\" target=_blank>tomasitobambito</a>");
				f.innerHTML+=" • Source code <a href=\"https://github.com/tomasitobambito/majibingo\" target=_blank>on GitHub</a> • Originally made by <a href=\"https://github.com/GVmG\" target=_blank>Raechel</a> • Font: <a href=\"https://fonts.google.com/specimen/Outfit\" target=_blank>Google Fonts - Outfit</a> • Uses <a href=\"https://github.com/davidbau/seedrandom\" target=_blank>seedrandom.js</a> • Now with "+bingos.length+" entries! Submit your suggestions to tomasitobambito#2675 • Current seed: <a onclick=\"shareSeed()\">"+seed+"<a>";
			}
		</script>
	</body>
</html>
